<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>מנהל • אפליקציית שעות עבודה</title>
  <link rel="stylesheet" href="src/css/main.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <img class="brand-logo" src="assets/logo.jpg" alt="לוגו" />
      <span class="brand-title">אפליקציית שעות עבודה</span>
    </div>

    <div class="topbar-right">
      <span id="whoami" class="muted"></span>
      <button
        id="logoutBtn"
        class="btn btn-outline"
        type="button"
        style="position:relative; z-index:9999; pointer-events:auto;"
      >
        התנתקות
      </button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <h2>משתמשים (כולל סיסמאות)</h2>

        <div class="form inline">
          <button id="mgrUsersLoad" class="btn btn-outline" type="button">טעינת משתמשים</button>
          <div id="mgrUsersMsg" class="muted"></div>
        </div>

        <div class="form">
          <h3>יצירת משתמש חדש</h3>
          <div class="row">
            <label>שם משתמש <input id="mgrNewUsername" type="text" /></label>
            <label>סיסמה <input id="mgrNewPassword" type="text" /></label>
            <label>
              תפקיד
              <select id="mgrNewRole">
                <option value="employee">עובד</option>
                <option value="manager">מנהל</option>
              </select>
            </label>
          </div>
          <button id="mgrCreateUser" class="btn" type="button">יצירת משתמש</button>
        </div>

        <div class="table-wrap">
          <table class="table" id="mgrUsersTable">
            <thead><tr><th>שם משתמש</th><th>תפקיד</th><th>סיסמה</th><th>UID</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="card">
        <h2>עריכת מנהל</h2>

        <div class="form">
          <div class="row">
            <!-- ✅ משתמשים בשם משתמש, לא UID (שומרים את אותו id כדי לא לשבור JS אם עדיין משתמש בו) -->
            <label>שם משתמש <input id="mgrTargetUid" type="text" placeholder="לדוגמה: matti" autocomplete="username" /></label>
            <label>תאריך <input id="mgrTargetDate" type="date" /></label>
          </div>

          <h3>שעות עבודה</h3>
          <div class="row">
            <label>התחלה <input id="mgrWhStart" type="time" /></label>
            <label>סיום <input id="mgrWhEnd" type="time" /></label>
            <button id="mgrWhSave" class="btn" type="button">שמירת שעות עבודה</button>
          </div>

          <h3>חופשה</h3>
          <div class="row">
            <label>
              סוג
              <select id="mgrVacType">
                <option value="vacation">חופשה</option>
                <option value="sick">מחלה</option>
                <option value="child_sick">מחלת ילד</option>
                <option value="reserve">מילואים</option>
              </select>
            </label>
            <button id="mgrVacSet" class="btn" type="button">קביעת חופשה</button>
            <button id="mgrVacRemove" class="btn btn-outline" type="button">הסרת חופשה</button>
          </div>

          <div id="mgrEditMsg" class="muted"></div>
        </div>
      </section>

      <section class="card">
        <h2>דו״ח חודשי (הורדת JSON)</h2>
        <div class="form inline">
          <label>חודש <input id="mgrExportMonth" type="month" /></label>
          <button id="mgrExport" class="btn" type="button">הורדת JSON</button>
        </div>
        <div id="mgrExportMsg" class="muted"></div>
      </section>
    </div>
  </main>

  <script type="module" src="src/js/manager.js"></script>
</body>
</html>
